---
tpagetitle: "Gráficos"
author: "María Fernanda Núñez"
knitr:
  opts_chunk: 
    collapse: true
    comment: "#>" 
    R.options:
      knitr.graphics.auto_pdf: true
      
format: 
  revealjs:
    #logo: images/Imagen2.png
    slide-number: true
    theme: [pp.scss]
    title-slide-attributes:
      visibility: false
#      data-background-image: images/portada.jpg
#      data-background-size: cover
    auto-play-media: true


editor:
  render-on-save: true
---

## {data-background-color="red"}

:::: {.columns .v-center-container}
::: {.column width=10%}
:::
::: {.column width=90%}
# [Construcción de gráficos en R con ggplot2]{.black}

------------------------------------------------------------------------
<br>
María Fernanda Núñez

Ayudantía Métodos Cuantitativos UDP
:::
::::


##

![](../images/gg.png)

## 

`ggplot2` es un potente paquete para visualizar datos en R. **Funciona por capas**, comenzando desde lo más central o nuclear hasta llegar a los detalles más estéticos necesarios. 

1. La **primera capa corresponde a los datos**, es decir, las variables que queremos graficar ya listas y procesadas.
2. La **segunda corresponde** al "mapping", que es básicamente determinar **cuáles variables serán el eje X e Y**, si existen grupos u otros. 
3. La **tercera es la geometría**, la cual se refiere a la **forma** que tendrá el gráfico (líneas, barras, puntos, boxplot, violinplot, etc.). 


```{r}

library(ggplot2)
proc_cep <- readRDS("proc_cep.RData")
```

## [Datos y Mapping]{.black} 


```{r}
#| echo: true
ggplot(data = proc_cep, 
       mapping = aes(x = empleo)) # especificamos datos y mapping 


```




## [Geometría]{.black} 

```{r}
#| echo: true
ggplot(data = proc_cep, 
       mapping = aes(x = empleo)) + # especificamos datos y mapping 
  geom_bar() # agregamos geometria o forma 

```

## [Escala]{.black} 

```{r}
#| echo: true


ggplot(data = proc_cep, 
       mapping = aes(x = empleo)) + # especificamos datos y mapping 
  geom_bar(color = "black", fill = "darkblue") + # agregamos geometria y color y relleno
  scale_y_continuous(limits = c(0,1000)) # agregamos escala en eje Y y ponemos limites minimos y maximos

```


## [Etiquetas]{.black} 

```{r}
#| echo: true


ggplot(data = proc_cep, 
       mapping = aes(x = empleo)) + # especificamos datos y mapping 
  geom_bar(color = "black", fill = "darkblue") + # agregamos geometria y color y relleno
  scale_y_continuous(limits = c(0,1000)) +# agregamos escala en eje Y y ponemos limites minimos y maximos
  labs(title ="Condición de empleo 2019", 
       x = "Situación empleo", 
       y = "Frecuencia",
       caption = "Fuente: Elaboración propia en base a Encuesta CEP Diciembre 2019.") # agregamos titulo, nombres a los ejes y fuente
```


# [Otros tipos de gráficos]{.white}{data-background-color="red"}


## [Histograma]{.black}

```{r}
#| echo: true

ggplot(proc_cep, aes(edad)) + 
  geom_histogram(aes(x = edad, y = ..density..), bins = 50, color = "black", fill = "grey") +
  geom_density(color = "blue")

```

## [Diagrama de densidad]{.black}

```{r}
#| echo: true


ggplot(data = proc_cep, 
       mapping = aes(x = edad)) + # especificamos datos y mapping 
  geom_density(color = "black", fill = "#FA8072", alpha = 0.8)  + # agregamos geometria y colores
  labs(title ="Diagrama densidad: Edad", 
       x = "Edad", 
       y = "Frecuencia",
       caption = "Fuente: Elaboración propia en base a Encuesta CEP Diciembre 2019.") # agregamos titulo, nombres a los ejes y fuente

```

## [Gráficos de caja y bigote]{.black}

```{r}
#| echo: true

ggplot(data = proc_cep, 
       mapping = aes(y = edad)) + # especificamos datos y mapping 
  geom_boxplot(fill = "darkblue", alpha = 0.8)  + # agregamos geometria y colores
  labs(title ="Gráfico de cajas: Edad", 
       y = "Edad", 
       caption = "Fuente: Elaboración propia en base a Encuesta CEP Diciembre 2019.") # agregamos titulo, nombres a los ejes y fuente


```

